/**
 * @author alvin aryan
**/

package penjualanhp;
import java.awt.headlessexception;
import java.sql.connection;
import javax.swing.table.defaulttablemodel;
import java.sql.sqlexception;
import javax.swing.joptionpane;

public class data_penjualanhp extends javax.swing.jframe {

    private void kosongkan_form(){
        txtkode.seteditable(true);
        txtkode.settext(null);
        txtmerek.settext(null);
        cbtype.setselecteditem(this);
        txtharga.settext(null);
        txtjumlah.settext(null);
        txtketerangan.settext(null);
    }
    
    private void tampilkan_data(){
        
        defaulttablemodel model = new defaulttablemodel();
        model.addcolumn("no.");
        model.addcolumn("kode");
        model.addcolumn("merek");
        model.addcolumn("type");
        model.addcolumn("harga");
        model.addcolumn("jumlah");
        model.addcolumn("keterangan");
        
        try{
            int no = 1;
            string sql = "select * from data_penjualanhp";
            java.sql.connection conn = (connection)koneksi.configdb();
            java.sql.statement stm = conn.createstatement();
            java.sql.resultset res = stm.executequery(sql);
            
            while(res.next()){
                model.addrow(new object[]{no++,res.getstring(1),res.getstring(2),res.getstring(3),res.getstring(4),res.getstring(5),res.getstring(6)}); 
            }
            tabel.setmodel(model);            
        }catch (sqlexception e){
            system.out.println("error : " + e.getmessage());
        }
    }
    
    
    /**
     * creates new form data_penjualanhp
     */
    public data_penjualanhp() {
        initcomponents();
    }

    /**
     * this method is called from within the constructor to initialize the form.
     * warning: do not modify this code. the content of this method is always
     * regenerated by the form editor.
     */
    @suppresswarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="generated code">                          
    private void initcomponents() {

        timeutil1 = new com.mysql.jdbc.timeutil();
        jpanel1 = new javax.swing.jpanel();
        jpanel2 = new javax.swing.jpanel();
        jlabel1 = new javax.swing.jlabel();
        txtkode = new javax.swing.jtextfield();
        jscrollpane1 = new javax.swing.jscrollpane();
        tabel = new javax.swing.jtable();
        jlabel2 = new javax.swing.jlabel();
        txtmerek = new javax.swing.jtextfield();
        jlabel3 = new javax.swing.jlabel();
        txtharga = new javax.swing.jtextfield();
        jlabel4 = new javax.swing.jlabel();
        txtjumlah = new javax.swing.jtextfield();
        jlabel5 = new javax.swing.jlabel();
        jlabel6 = new javax.swing.jlabel();
        txtketerangan = new javax.swing.jtextfield();
        cbtype = new javax.swing.jcombobox<>();
        tbhapus = new javax.swing.jbutton();
        tbsimpan = new javax.swing.jbutton();
        tbedit = new javax.swing.jbutton();
        tbbatal = new javax.swing.jbutton();
        tbkeluar = new javax.swing.jbutton();
        jlabel9 = new javax.swing.jlabel();
        jlabel10 = new javax.swing.jlabel();

        setdefaultcloseoperation(javax.swing.windowconstants.exit_on_close);

        jpanel1.setborder(javax.swing.borderfactory.createbevelborder(javax.swing.border.bevelborder.raised));

        jpanel2.setbackground(new java.awt.color(204, 153, 255));
        jpanel2.setborder(javax.swing.borderfactory.createtitledborder(null, "data penjualan handphone", javax.swing.border.titledborder.center, javax.swing.border.titledborder.default_position, new java.awt.font("times new roman", 1, 18))); // noi18n

        jlabel1.settext("kode");

        txtkode.addactionlistener(new java.awt.event.actionlistener() {
            public void actionperformed(java.awt.event.actionevent evt) {
                txtkodeactionperformed(evt);
            }
        });

        tabel.setbackground(new java.awt.color(102, 255, 255));
        tabel.setmodel(new javax.swing.table.defaulttablemodel(
            new object [][] {
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null},
                {null, null, null, null}
            },
            new string [] {
                "title 1", "title 2", "title 3", "title 4"
            }
        ));
        tabel.setselectionforeground(new java.awt.color(102, 255, 255));
        tabel.addmouselistener(new java.awt.event.mouseadapter() {
            public void mouseclicked(java.awt.event.mouseevent evt) {
                tabelmouseclicked(evt);
            }
        });
        jscrollpane1.setviewportview(tabel);

        jlabel2.settext("merek");

        jlabel3.settext("type");

        jlabel4.settext("harga");

        jlabel5.settext("jumlah");

        jlabel6.settext("keterangan");

        cbtype.setmodel(new javax.swing.defaultcomboboxmodel<>(new string[] { " ", "xiaomi redmi note 9\t", "xiaomi redmi note 10\t", "xiaomi redmi note 9 pro ", "xiaomi redmi 9t\t", "xiaomi redmi 9\t", "xiaomi mi 11 pro\t", "xiaomi redmi 9c\t", "xiaomi redmi note 10 pro ", "xiaomi poco x3 pro\t", "xiaomi poco m3", "iphone 12 ", "iphone 12 mini. ", "iphone se ", "iphone 11 ", "galaxy s21 ultra 5g.", "galaxy s21 | s21+ 5g.", "galaxy s20 fe.", "galaxy z fold2.", "galaxy a72.", "galaxy a52.", "galaxy buds pro.", "oppo a74. ", "oppo a74 5g.", "oppo a54. ", "oppo reno5 f.", "oppo reno 5. ", "oppo a12.", "oppo a31." }));

        tbhapus.seticon(new javax.swing.imageicon(getclass().getresource("/ikon/hnet.com-image (1).png"))); // noi18n
        tbhapus.settext("hapus");
        tbhapus.addactionlistener(new java.awt.event.actionlistener() {
            public void actionperformed(java.awt.event.actionevent evt) {
                tbhapusactionperformed(evt);
            }
        });

        tbsimpan.seticon(new javax.swing.imageicon(getclass().getresource("/ikon/hnet.com-image.png"))); // noi18n
        tbsimpan.settext("simpan");
        tbsimpan.addactionlistener(new java.awt.event.actionlistener() {
            public void actionperformed(java.awt.event.actionevent evt) {
                tbsimpanactionperformed(evt);
            }
        });

        tbedit.seticon(new javax.swing.imageicon(getclass().getresource("/ikon/70-704184_png-file-svg-pencil-edit-icon-png-transparent (1).png"))); // noi18n
        tbedit.settext("edit");
        tbedit.addactionlistener(new java.awt.event.actionlistener() {
            public void actionperformed(java.awt.event.actionevent evt) {
                tbeditactionperformed(evt);
            }
        });

        tbbatal.seticon(new javax.swing.imageicon(getclass().getresource("/ikon/icons8_erase_16px.png"))); // noi18n
        tbbatal.settext("batal");
        tbbatal.addactionlistener(new java.awt.event.actionlistener() {
            public void actionperformed(java.awt.event.actionevent evt) {
                tbbatalactionperformed(evt);
            }
        });

        tbkeluar.seticon(new javax.swing.imageicon(getclass().getresource("/ikon/4911bc0c-d895-4ab8-b002-92c56c0d9179 (1).png"))); // noi18n
        tbkeluar.settext("keluar");
        tbkeluar.addactionlistener(new java.awt.event.actionlistener() {
            public void actionperformed(java.awt.event.actionevent evt) {
                tbkeluaractionperformed(evt);
            }
        });

        jlabel9.seticon(new javax.swing.imageicon(getclass().getresource("/ikon/download (1).png"))); // noi18n

        jlabel10.seticon(new javax.swing.imageicon(getclass().getresource("/ikon/smartphone-icon-file (1).png"))); // noi18n

        javax.swing.grouplayout jpanel2layout = new javax.swing.grouplayout(jpanel2);
        jpanel2.setlayout(jpanel2layout);
        jpanel2layout.sethorizontalgroup(
            jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.leading)
            .addgroup(jpanel2layout.createsequentialgroup()
                .addgap(30, 30, 30)
                .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.leading)
                    .addgroup(jpanel2layout.createsequentialgroup()
                        .addcomponent(tbkeluar, javax.swing.grouplayout.preferred_size, 142, javax.swing.grouplayout.preferred_size)
                        .addgap(0, 0, short.max_value))
                    .addgroup(javax.swing.grouplayout.alignment.trailing, jpanel2layout.createsequentialgroup()
                        .addcomponent(jscrollpane1, javax.swing.grouplayout.default_size, 579, short.max_value)
                        .addgap(30, 30, 30))
                    .addgroup(jpanel2layout.createsequentialgroup()
                        .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.leading)
                            .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.leading)
                                .addgroup(jpanel2layout.createsequentialgroup()
                                    .addcomponent(jlabel1, javax.swing.grouplayout.preferred_size, 64, javax.swing.grouplayout.preferred_size)
                                    .addgap(18, 18, 18)
                                    .addcomponent(txtkode, javax.swing.grouplayout.preferred_size, 207, javax.swing.grouplayout.preferred_size))
                                .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.trailing)
                                    .addgroup(jpanel2layout.createsequentialgroup()
                                        .addcomponent(jlabel6, javax.swing.grouplayout.preferred_size, 64, javax.swing.grouplayout.preferred_size)
                                        .addgap(18, 18, 18)
                                        .addcomponent(txtketerangan, javax.swing.grouplayout.preferred_size, 207, javax.swing.grouplayout.preferred_size))
                                    .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.trailing, false)
                                        .addgroup(jpanel2layout.createsequentialgroup()
                                            .addcomponent(jlabel4, javax.swing.grouplayout.preferred_size, 64, javax.swing.grouplayout.preferred_size)
                                            .addgap(18, 18, 18)
                                            .addcomponent(txtharga, javax.swing.grouplayout.preferred_size, 207, javax.swing.grouplayout.preferred_size))
                                        .addgroup(jpanel2layout.createsequentialgroup()
                                            .addcomponent(jlabel3, javax.swing.grouplayout.preferred_size, 64, javax.swing.grouplayout.preferred_size)
                                            .addgap(18, 18, 18)
                                            .addcomponent(cbtype, 0, javax.swing.grouplayout.default_size, short.max_value))
                                        .addgroup(jpanel2layout.createsequentialgroup()
                                            .addcomponent(jlabel5, javax.swing.grouplayout.preferred_size, 64, javax.swing.grouplayout.preferred_size)
                                            .addgap(18, 18, 18)
                                            .addcomponent(txtjumlah, javax.swing.grouplayout.preferred_size, 207, javax.swing.grouplayout.preferred_size)))))
                            .addgroup(jpanel2layout.createsequentialgroup()
                                .addcomponent(jlabel2, javax.swing.grouplayout.preferred_size, 64, javax.swing.grouplayout.preferred_size)
                                .addgap(18, 18, 18)
                                .addcomponent(txtmerek, javax.swing.grouplayout.preferred_size, 207, javax.swing.grouplayout.preferred_size)
                                .addgap(70, 70, 70)))
                        .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.leading, false)
                            .addgroup(jpanel2layout.createsequentialgroup()
                                .addpreferredgap(javax.swing.layoutstyle.componentplacement.related, javax.swing.grouplayout.default_size, short.max_value)
                                .addcomponent(jlabel9)
                                .addgap(170, 170, 170))
                            .addgroup(jpanel2layout.createsequentialgroup()
                                .addpreferredgap(javax.swing.layoutstyle.componentplacement.related)
                                .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.leading)
                                    .addgroup(jpanel2layout.createsequentialgroup()
                                        .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.leading)
                                            .addcomponent(tbsimpan)
                                            .addcomponent(tbedit, javax.swing.grouplayout.preferred_size, 101, javax.swing.grouplayout.preferred_size))
                                        .addgap(18, 18, 18)
                                        .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.leading)
                                            .addcomponent(tbhapus)
                                            .addcomponent(tbbatal, javax.swing.grouplayout.preferred_size, 91, javax.swing.grouplayout.preferred_size)))
                                    .addcomponent(jlabel10, javax.swing.grouplayout.alignment.trailing))
                                .addgap(36, 36, 36))))))
        );
        jpanel2layout.setverticalgroup(
            jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.leading)
            .addgroup(jpanel2layout.createsequentialgroup()
                .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.leading)
                    .addgroup(jpanel2layout.createsequentialgroup()
                        .addgap(33, 33, 33)
                        .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.baseline)
                            .addcomponent(jlabel1)
                            .addcomponent(txtkode, javax.swing.grouplayout.preferred_size, javax.swing.grouplayout.default_size, javax.swing.grouplayout.preferred_size))
                        .addgap(17, 17, 17)
                        .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.baseline)
                            .addcomponent(jlabel2)
                            .addcomponent(txtmerek, javax.swing.grouplayout.preferred_size, javax.swing.grouplayout.default_size, javax.swing.grouplayout.preferred_size))
                        .addgap(18, 18, 18)
                        .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.leading)
                            .addcomponent(cbtype, javax.swing.grouplayout.preferred_size, javax.swing.grouplayout.default_size, javax.swing.grouplayout.preferred_size)
                            .addcomponent(jlabel3))
                        .addgap(18, 18, 18)
                        .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.baseline)
                            .addcomponent(jlabel4)
                            .addcomponent(txtharga, javax.swing.grouplayout.preferred_size, javax.swing.grouplayout.default_size, javax.swing.grouplayout.preferred_size))
                        .addpreferredgap(javax.swing.layoutstyle.componentplacement.unrelated)
                        .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.baseline)
                            .addcomponent(jlabel5)
                            .addcomponent(txtjumlah, javax.swing.grouplayout.preferred_size, javax.swing.grouplayout.default_size, javax.swing.grouplayout.preferred_size))
                        .addgap(18, 18, 18)
                        .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.baseline)
                            .addcomponent(jlabel6)
                            .addcomponent(txtketerangan, javax.swing.grouplayout.preferred_size, javax.swing.grouplayout.default_size, javax.swing.grouplayout.preferred_size))
                        .addgap(53, 53, 53))
                    .addgroup(javax.swing.grouplayout.alignment.trailing, jpanel2layout.createsequentialgroup()
                        .addgap(38, 38, 38)
                        .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.trailing)
                            .addcomponent(jlabel9)
                            .addcomponent(jlabel10))
                        .addgap(18, 18, 18)
                        .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.baseline)
                            .addcomponent(tbsimpan)
                            .addcomponent(tbhapus))
                        .addgap(18, 18, 18)
                        .addgroup(jpanel2layout.createparallelgroup(javax.swing.grouplayout.alignment.baseline)
                            .addcomponent(tbedit)
                            .addcomponent(tbbatal, javax.swing.grouplayout.preferred_size, 39, javax.swing.grouplayout.preferred_size))
                        .addgap(39, 39, 39)))
                .addcomponent(jscrollpane1, javax.swing.grouplayout.preferred_size, 137, javax.swing.grouplayout.preferred_size)
                .addpreferredgap(javax.swing.layoutstyle.componentplacement.related, 13, short.max_value)
                .addcomponent(tbkeluar, javax.swing.grouplayout.preferred_size, 44, javax.swing.grouplayout.preferred_size))
        );

        javax.swing.grouplayout jpanel1layout = new javax.swing.grouplayout(jpanel1);
        jpanel1.setlayout(jpanel1layout);
        jpanel1layout.sethorizontalgroup(
            jpanel1layout.createparallelgroup(javax.swing.grouplayout.alignment.leading)
            .addcomponent(jpanel2, javax.swing.grouplayout.default_size, javax.swing.grouplayout.default_size, short.max_value)
        );
        jpanel1layout.setverticalgroup(
            jpanel1layout.createparallelgroup(javax.swing.grouplayout.alignment.leading)
            .addgroup(javax.swing.grouplayout.alignment.trailing, jpanel1layout.createsequentialgroup()
                .addcontainergap(javax.swing.grouplayout.default_size, short.max_value)
                .addcomponent(jpanel2, javax.swing.grouplayout.preferred_size, javax.swing.grouplayout.default_size, javax.swing.grouplayout.preferred_size)
                .addgap(85, 85, 85))
        );

        javax.swing.grouplayout layout = new javax.swing.grouplayout(getcontentpane());
        getcontentpane().setlayout(layout);
        layout.sethorizontalgroup(
            layout.createparallelgroup(javax.swing.grouplayout.alignment.leading)
            .addcomponent(jpanel1, javax.swing.grouplayout.default_size, javax.swing.grouplayout.default_size, short.max_value)
        );
        layout.setverticalgroup(
            layout.createparallelgroup(javax.swing.grouplayout.alignment.leading)
            .addcomponent(jpanel1, javax.swing.grouplayout.preferred_size, 529, short.max_value)
        );

        pack();
    }// </editor-fold>                        

    private void txtkodeactionperformed(java.awt.event.actionevent evt) {                                        
        // todo add your handling code here:
    }                                       

    private void tbhapusactionperformed(java.awt.event.actionevent evt) {                                        
        try{
            string sql = "delete from data_penjualanhp where kode='"+txtkode.gettext()+"'";
            java.sql.connection conn = (connection)koneksi.configdb();
            java.sql.preparedstatement pstm = conn.preparestatement(sql);
            pstm.execute();
            joptionpane.showmessagedialog(null, "hapus data berhasil...");
        }catch(headlessexception | sqlexception e){
            joptionpane.showmessagedialog(this, e.getmessage());
        }
        tampilkan_data();
        kosongkan_form();
    }                                       

    private void tbeditactionperformed(java.awt.event.actionevent evt) {                                       
        try{
            string sql = "update data_penjualanhp set kode='"+txtkode.gettext()
                    +"',merek='"+txtmerek.gettext()
                    
                    +"',type='"+cbtype.getselecteditem()
                    +"',harga='"+txtharga.gettext()
                    +"',jumlah='"+txtjumlah.gettext()
                    +"',keterangan='"+txtketerangan.gettext()
                    +"' where kode = '"+txtkode.gettext()+"'";
            java.sql.connection conn = (connection)koneksi.configdb();
            java.sql.preparedstatement pstm = conn.preparestatement(sql);
            pstm.execute();
            joptionpane.showmessagedialog(null, "edit data berhasil...");
        }catch(headlessexception | sqlexception e){
            joptionpane.showmessagedialog(this, e.getmessage());
        }
        tampilkan_data();
        kosongkan_form();
    }                                      

    private void tbbatalactionperformed(java.awt.event.actionevent evt) {                                        
        kosongkan_form();
    }                                       

    private void tabelmouseclicked(java.awt.event.mouseevent evt) {                                   
        int baris = tabel.rowatpoint(evt.getpoint());
        string kode = tabel.getvalueat(baris, 1).tostring();
        txtkode.settext(kode);
        
        string merek = tabel.getvalueat(baris, 2).tostring();
        txtmerek.settext(merek);
        
        string type = tabel.getvalueat(baris, 3).tostring();
        cbtype.setselecteditem(type);
        
        string harga = tabel.getvalueat(baris, 4).tostring();
        txtharga.settext(harga);
        
        string jumlah = tabel.getvalueat(baris, 5).tostring();
        txtjumlah.settext(jumlah);
        
        string keterangan = tabel.getvalueat(baris, 6).tostring();
        txtketerangan.settext(keterangan);
    }                                  

    private void tbkeluaractionperformed(java.awt.event.actionevent evt) {                                         
        system.exit(0);
    }                                        

private void tbsimpanactionperformed(java.awt.event.actionevent evt) {                                         
        try{
            string sql = "insert into data_penjualanhp values ('"+txtkode.gettext()+"','"+txtmerek.gettext()+"','"+cbtype.getselecteditem()+"','"+txtharga.gettext()+"','"+txtjumlah.gettext()+"','"+txtketerangan.gettext()+"')";
            java.sql.connection conn = (connection)koneksi.configdb();
            java.sql.preparedstatement pstm = conn.preparestatement(sql);
            pstm.execute();
            joptionpane.showmessagedialog(null, "proses simpan data berhasil..");
            tampilkan_data();
            kosongkan_form();
        }catch(headlessexception | sqlexception e){
            joptionpane.showmessagedialog(this, e.getmessage());
        }
    }                     
     /**
     * @param args the command line arguments
     */
    public static void main(string args[]) {
        /* set the nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" look and feel setting code (optional) ">
        /* if nimbus (introduced in java se 6) is not available, stay with the default look and feel.
         * for details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.uimanager.lookandfeelinfo info : javax.swing.uimanager.getinstalledlookandfeels()) {
                if ("nimbus".equals(info.getname())) {
                    javax.swing.uimanager.setlookandfeel(info.getclassname());
                    break;
                }
            }
        } catch (classnotfoundexception ex) {
            java.util.logging.logger.getlogger(data_penjualanhp.class.getname()).log(java.util.logging.level.severe, null, ex);
        } catch (instantiationexception ex) {
            java.util.logging.logger.getlogger(data_penjualanhp.class.getname()).log(java.util.logging.level.severe, null, ex);
        } catch (illegalaccessexception ex) {
            java.util.logging.logger.getlogger(data_penjualanhp.class.getname()).log(java.util.logging.level.severe, null, ex);
        } catch (javax.swing.unsupportedlookandfeelexception ex) {
            java.util.logging.logger.getlogger(data_penjualanhp.class.getname()).log(java.util.logging.level.severe, null, ex);
        }
        //</editor-fold>

        /* create and display the form */
        java.awt.eventqueue.invokelater(new runnable() {
            public void run() {
                new data_penjualanhp().setvisible(true);
            }
        });
    }

    // variables declaration - do not modify                     
    private javax.swing.jcombobox<string> cbtype;
    private javax.swing.jlabel jlabel1;
    private javax.swing.jlabel jlabel10;
    private javax.swing.jlabel jlabel2;
    private javax.swing.jlabel jlabel3;
    private javax.swing.jlabel jlabel4;
    private javax.swing.jlabel jlabel5;
    private javax.swing.jlabel jlabel6;
    private javax.swing.jlabel jlabel9;
    private javax.swing.jpanel jpanel1;
    private javax.swing.jpanel jpanel2;
    private javax.swing.jscrollpane jscrollpane1;
    private javax.swing.jtable tabel;
    private javax.swing.jbutton tbbatal;
    private javax.swing.jbutton tbedit;
    private javax.swing.jbutton tbhapus;
    private javax.swing.jbutton tbkeluar;
    private javax.swing.jbutton tbsimpan;
    private com.mysql.jdbc.timeutil timeutil1;
    private javax.swing.jtextfield txtharga;
    private javax.swing.jtextfield txtjumlah;
    private javax.swing.jtextfield txtketerangan;
    private javax.swing.jtextfield txtkode;
    private javax.swing.jtextfield txtmerek;
    // end of variables declaration                   
}
